/* Cleaned styles: heading, then container with table, result text, button (in that order) */

/* global UI scale (50% smaller for UI, NOT the background image) */
:root { --ui-scale: 0.8; }

/* Keep body background at normal size (do NOT scale body) */
body {
  font-family: "Poppins", sans-serif;
  color: white;
  margin: 0;
  padding: 0;
  text-align: center;
  display: flex;
  justify-content: center;
  align-items: center;
  min-height: 100vh;
  background: transparent; /* moved visual background to fixed pseudo-element */
  transform: none; /* ensure no transforms on body */
  -webkit-backface-visibility: hidden;
  backface-visibility: hidden;
}

/* Fixed background layer that never moves when other elements transform */
body::before {
  content: "";
  position: fixed;
  inset: 0; /* top:0; right:0; bottom:0; left:0; */
  z-index: -1;
  pointer-events: none;
  background: radial-gradient(circle at center, rgba(0,0,0,0.6) 0%, rgba(0,0,0,0.95) 100%), url("images/fond.png") center/cover no-repeat;
  background-attachment: fixed;
  will-change: transform;
}

/* Scale the main UI container (title, table, buttons, result) */
.container {
  transform: scale(var(--ui-scale));
  transform-origin: top center;
  /* expand the layout container so visual width stays matching viewport */
  width: calc(100% / var(--ui-scale));
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 12px;
  /* removed margin-top since body centers it */
}

/* Fallback: if elements are not inside .container (script may append table directly to body),
   remove any scaling/zoom so the UI doesn't zoom out/in when the machine spins. */
#myTable,
#result,
#spinButton,
h1 {
  transform: none; /* no zoom */
  transform-origin: initial;
  transition: none; /* disable transform transitions */
}

/* When scaling individual elements was applied before, remove it to avoid zoom effects */
#myTable {
  transform: none; /* no zoom */
  transform-origin: initial;
  /* keep table square and responsive without dynamic scaling */
  width: min(80vh, 80vw);
  max-width: 90vw;
  aspect-ratio: 1 / 1;
  table-layout: fixed;
  overflow: hidden;
}

/* Yellow-bordered grid styles (centered under the title) */
#myTable {
  border-collapse: separate;
  border-radius: 12px;
  border-spacing: 0;
  margin: 0 auto;
  border: 6px solid #FFD700;
  background: transparent; /* fond supprimé */
  box-shadow: 0 6px 18px rgba(255, 215, 0, 0.12), 0 0 8px #ff6600;
  /* keep table square and constrained to viewport, applying the 20% reduction */
  transform: scale(calc(var(--ui-scale) * 0.8));
  transform-origin: top center;
  width: calc(50% / (var(--ui-scale) * 0.8));
  max-width: calc(90vw / (var(--ui-scale) * 0.8));
  aspect-ratio: 1 / 1;
  table-layout: fixed;
  overflow: hidden;
}
 
/* cells */
#myTable td {
  border: 3px solid #FFD700;
  background: rgba(255, 236, 179, 0); /* plus de fond noir, cellule claire */
  padding: 6px;
  width: 200px;       /* symbol cell width increased to 200px (200%) */
  height: 200px;      /* symbol cell height increased to 200px (200%) */
  vertical-align: middle;
  text-align: center;
}

/* agrandir les images et centrer */
#myTable img {
  max-width: 200px;   /* symbol size increased to 200px (200%) */
  max-height: 200px;  /* symbol size increased to 200px (200%) */
  display: block;
  margin: 0 auto;
  object-fit: contain;
}

/* masquer les labels si présents (sécurité) */
#myTable span {
  display: none;
}

/* result text placed right under the table */
#result {
  margin-top: 4px; /* tighten gap under the table */
  min-height: 28px;
  font-size: 40px; /* 200% bigger (was 20px) */
  color: #ffffff;
  text-shadow: 0 1px 0 rgba(0,0,0,0.6);
}

/* button directly under the table (small gap) */
#spinButton {
  background: #ff3366;
  color: white;
  font-size: 18px;
  padding: 10px 28px;
  border: none;
  border-radius: 8px;
  cursor: pointer;
  transition: background 0.15s ease;
  margin-top: -400px; /* placed 10px under the table */
  transform: scale(2);
  transform-origin: center;
}

#spinButton:hover { background: #ff6699; }

/* ajout animations glow + explode (assurer que .cell-content existe dans la table) */
.cell-content {
  display: flex;
  align-items: center;
  justify-content: center;
  flex-direction: column;
  transition: transform 180ms ease, opacity 180ms ease;
}

/* ensure cell-content can hold absolutely positioned clones */
.cell-content {
  position: relative;
  overflow: visible;
}

.cell-content.glow {
  box-shadow: 0 0 24px 8px rgba(255,215,0,0.95);
  animation: br-glow 2s ease-in-out forwards;
  z-index: 2;
}

@keyframes br-glow {
  0%   { box-shadow: 0 0 0 0 rgba(255,215,0,0.0); transform: scale(1); }
  50%  { box-shadow: 0 0 32px 10px rgba(255,215,0,0.9); transform: scale(1.06); }
  100% { box-shadow: 0 0 12px 4px rgba(255,215,0,0.6); transform: scale(1); }
}

.cell-content.explode {
  animation: br-explode 420ms cubic-bezier(.2, .9, .2, 1) forwards;
}

@keyframes br-explode {
  0% {
    transform: scale(1) rotate(0deg);
    opacity: 1;
    filter: drop-shadow(0 6px 12px rgba(255,180,0,0.15));
  }
  60% {
    transform: scale(1.6) rotate(8deg);
    opacity: 0.85;
    filter: blur(0.5px) drop-shadow(0 12px 18px rgba(255,140,0,0.25));
  }
  100% {
    transform: scale(2.4) rotate(18deg);
    opacity: 0;
    filter: blur(2px) drop-shadow(0 18px 28px rgba(255,80,0,0.34));
  }
}

/* fade-in pour les nouveaux symboles */
.cell-content > * {
  opacity: 1;
  transition: opacity 200ms ease, transform 200ms ease;
}

/* glowing winner symbol */
#myTable img.win-glow {
  animation: win-pulse 600ms ease-in-out infinite alternate;
  filter: drop-shadow(0 0 8px rgba(255,215,0,0.9)) drop-shadow(0 0 16px rgba(255,120,0,0.6));
  transform-origin: center;
}

/* pulse keyframes */
@keyframes win-pulse {
  from {
    transform: scale(1);
    filter: drop-shadow(0 0 6px rgba(255,215,0,0.7));
  }
  to {
    transform: scale(1.12);
    filter: drop-shadow(0 0 20px rgba(255,215,0,1));
  }
}

/* explode clone animation (moves, scales and fades) */
.explode-clone {
  position: absolute;
  pointer-events: none;
  will-change: transform, opacity;
  animation: explode 800ms cubic-bezier(.2,.8,.2,1) forwards;
  z-index: 5;
}

/* explode keyframes use CSS variables --dx and --dy set from JS */
@keyframes explode {
  0% {
    transform: translate(0,0) scale(1) rotate(0);
    opacity: 1;
    filter: brightness(1);
  }
  100% {
    transform: translate(var(--dx, 40px), var(--dy, -80px)) scale(2.2) rotate(30deg);
    opacity: 0;
    filter: brightness(1.4) blur(2px);
  }
}

/* small burst particles (optional fallback style if clones include a .particle element) */
.particle {
  position: absolute;
  width: 6px;
  height: 6px;
  border-radius: 50%;
  background: radial-gradient(circle at 30% 30%, #fff, #ffd700 40%, #ff6600 100%);
  animation: particle-fly 700ms forwards;
  pointer-events: none;
}

@keyframes particle-fly {
  to {
    transform: translate(var(--px, 20px), var(--py, -40px)) scale(0.1);
    opacity: 0;
  }
}

/* ensure bet select stays a reasonable size when expanded */
#betSelect {
  width: 120px;
  max-width: 40vmin;
  box-sizing: border-box;
  font-size: 16px;
}

/* when the select is expanded (size > 1) limit height and enable scroll */
#betSelect[size]:not([size="1"]) {
  max-height: 160px;
  overflow-y: auto;
}

/* keep options readable */
#betSelect option {
  padding: 6px 8px;
  font-size: 16px;
}



